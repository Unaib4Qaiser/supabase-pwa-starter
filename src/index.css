@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&family=Open+Sans:wght@400;500&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Safe area support for mobile devices with notches/punch holes */
@supports (padding: max(0px)) {
  .pt-safe {
    padding-top: max(env(safe-area-inset-top), 1rem);
  }
  
  .pb-safe {
    padding-bottom: max(env(safe-area-inset-bottom), 1rem);
  }
  
  .pl-safe {
    padding-left: max(env(safe-area-inset-left), 1rem);
  }
  
  .pr-safe {
    padding-right: max(env(safe-area-inset-right), 1rem);
  }
  
  .px-safe {
    padding-left: max(env(safe-area-inset-left), 1rem);
    padding-right: max(env(safe-area-inset-right), 1rem);
  }
  
  .py-safe {
    padding-top: max(env(safe-area-inset-top), 1rem);
    padding-bottom: max(env(safe-area-inset-bottom), 1rem);
  }
}

/* Ensure full viewport coverage on mobile */
html, body {
  height: 100vh;
  height: 100dvh; /* Dynamic viewport height for mobile browsers */
}

/* PWA Install prompt positioning for mobile safe areas */
.pwa-install-prompt {
  bottom: max(env(safe-area-inset-bottom), 1rem);
  left: max(env(safe-area-inset-left), 1rem);
  right: max(env(safe-area-inset-right), 1rem);
}

html, body, #root { 
  height: 100%; 
}

/* Performance optimizations */
* {
  box-sizing: border-box;
}

/* Optimize font loading and rendering */
@layer base {
  html {
    font-display: swap;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }
  
  body {
    font-synthesis: none;
    text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%;
  }
}

/* Optimize transitions and animations */
@layer utilities {
  .transition-optimized {
    transition-property: transform, opacity, background-color, border-color;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 150ms;
  }
  
  .will-change-transform {
    will-change: transform;
  }
  
  .will-change-opacity {
    will-change: opacity;
  }
  
  .gpu-accelerated {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
  }
}

/* Optimize scrolling */
@layer base {
  * {
    scroll-behavior: smooth;
  }
  
  @media (prefers-reduced-motion: reduce) {
    * {
      scroll-behavior: auto;
    }
  }
}

/* Line clamping utilities */
@layer utilities {
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

/* Animation for fade-in effect */
@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fade-in 0.3s ease-out;
}
